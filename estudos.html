<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudos CientÃ­ficos Â· ConectaFisio360</title>
    <script type="module" src="js/app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif; }
        body { background:#0b1120; color:white; min-height:100vh; }
        header { display:flex; justify-content:space-between; align-items:center; padding:20px 5%; background:rgba(15,23,42,0.8); backdrop-filter:blur(10px); border-bottom:1px solid #334155; }
        .logo { font-size:22px; font-weight:700; background:linear-gradient(90deg,#3b82f6,#22d3ee); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        nav a { color:#cbd5e1; text-decoration:none; margin-left:25px; transition:0.2s; }
        nav a:hover { color:white; }
        .container { max-width:1200px; margin:40px auto; padding:0 5%; }
        h1 { font-size:32px; margin-bottom:10px; background:linear-gradient(90deg,#fff,#94a3b8); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .sub { color:#94a3b8; margin-bottom:30px; }
        .grid-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:25px; }
        .card { background:#1e293b; border-radius:20px; padding:20px; border:1px solid #334155; transition:0.3s; }
        .card:hover { border-color:#a78bfa; transform:translateY(-4px); }
        .card img { width:100%; height:150px; object-fit:cover; border-radius:12px; margin-bottom:15px; }
        .card h3 { margin-bottom:10px; color:#a78bfa; }
        .card p { color:#94a3b8; margin-bottom:15px; font-size:14px; line-height:1.5; }
        .btn { display:inline-block; padding:8px 16px; background:#7c3aed; color:white; border-radius:30px; text-decoration:none; font-size:14px; transition:0.2s; }
        .btn:hover { background:#6d28d9; transform:scale(1.02); }
        footer { text-align:center; padding:40px; color:#64748b; margin-top:60px; border-top:1px solid #1e293b; }
    </style>
</head>
<body>
    <header>
        <div class="logo">ConectaFisio360</div>
        <nav>
            <a href="painel.html"><i class="fas fa-home"></i> Home</a>
            <a href="modelos3d.html"><i class="fas fa-cube"></i> Modelos 3D</a>
            <a href="cursos.html"><i class="fas fa-graduation-cap"></i> Cursos</a>
            <a href="estudos.html"><i class="fas fa-flask"></i> Estudos</a>
            <a href="loja.html"><i class="fas fa-store"></i> Loja</a>
            <a href="perfil.html"><i class="fas fa-user"></i> Perfil</a>
            <a href="javascript:void(0);" onclick="logout()" style="color:#ef4444;"><i class="fas fa-sign-out-alt"></i> Sair</a>
        </nav>
    </header>

    <div class="container">
        <h1>ðŸ”¬ Estudos CientÃ­ficos</h1>
        <p class="sub">Artigos, revisÃµes e evidÃªncias atualizadas em fisioterapia.</p>
        <div class="grid-cards" id="estudos-container">
            <p style="text-align:center; width:100%;">Carregando estudos...</p>
        </div>
    </div>

    <footer>Â© 2026 ConectaFisio360</footer>

    <script type="module">
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
        import { getUsuarioAtual } from './js/app.js';

        // Redireciona se nÃ£o estiver logado (com timeout)
        if (!getUsuarioAtual()) {
            setTimeout(() => {
                if (!getUsuarioAtual()) window.location.href = 'login.html';
            }, 500);
        }

        const db = getDatabase();
        const estudosRef = ref(db, 'estudos');
        const container = document.getElementById('estudos-container');

        async function carregarEstudos() {
            const snapshot = await get(estudosRef);
            if (snapshot.exists()) {
                const estudos = snapshot.val();
                let html = '';
                for (let id in estudos) {
                    const e = estudos[id];
                    // Usando os campos exatos do seu Firebase: titulo, descricao, link, imagem
                    const titulo = e.titulo || 'Sem tÃ­tulo';
                    const descricao = e.descricao || 'Sem descriÃ§Ã£o';
                    const link = e.link || '#';
                    const imagem = e.imagem || 'https://picsum.photos/300/150?random=' + Math.floor(Math.random()*1000);
                    
                    html += `
                        <div class="card">
                            <img src="${imagem}" alt="${titulo}">
                            <h3>${titulo}</h3>
                            <p>${descricao}</p>
                            <a href="${link}" target="_blank" class="btn">Ler artigo</a>
                        </div>
                    `;
                }
                container.innerHTML = html;
            } else {
                container.innerHTML = '<p style="text-align:center; width:100%;">Nenhum estudo disponÃ­vel no momento.</p>';
            }
        }

        carregarEstudos();
    </script>
</body>
</html>
